<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" />
  <link rel="stylesheet" href="dstyle.css" />
  <title>Document</title>
</head>

<body>
  <div class="container">
    <div class="row">
    </div>
  </div>
  <div class="container my-3"><button class="btn btn-danger" id="priceArr">가격정렬</button></div>
  <div class="container my-3"><button class="btn btn-danger" id="namereturn">가나다 역순 정렬</button></div>
  <div class="container my-3"><button class="btn btn-danger" id="priceUnder">6만원 이하</button></div>
  <div class="container my-3"><button class="btn btn-danger" id="moreData">더보기</button></div>

  <script>
    //구매버튼을 누르면 장바구니에 상품명추가 실제 서비스면 서버로 보냈을듯함
    //데이터를 저장할 다른 공간을 만들어야하는데 가장 쉬운 곳은 변수인데 단점은 변수는 페이지 재로드시 초기화됨
    //데이터 영구적으로 저장하기에 적합하지 않음
    //반영구적으로 저장할 수 있는 방법이 있는데 그게 로컬스토리지임
    //브라우저에 저장할 수 있는 방법중
    //로컬스토리지랑 세션스토리지는 가장 쉽게 키: 밸류 형태로 데이터를 저장할 수있음
    //인덱스DB는 데이터가 크고 복잡하다 구조화된 대용량데이터 저장시 사용
    //쿠키는 보통로그인 정보 저장(인증정보)
    //캐시스토리지는 htms css js 파일 저장하는 곳임
    //로컬스토리지랑 세션스토리지 용량은 5MB 문자/숫자만 저장가능함 arr,obj 못넣음 넣으려고하면 강제로 문자열로바꿔줌
    //그런데 둘의 차이는 로컬스토리지는 사이트재접속해도 유지됨 세션스토리지는 사이트나가면 자동삭제됨
    var products = [
      { id: 0, price: 70000, title: 'Blossom Dress' },
      { id: 1, price: 50000, title: 'Springfield Shirt' },
      { id: 2, price: 60000, title: 'Black Monastery' }
    ];

    let cardlist = document.querySelector('.row');
    let clickcount = 0
    function 포이치(runArr) {
      runArr.forEach(item => {
        let secCardList = `<div class="col-sm-4">
        <img src="https://placehold.co/600" class="w-100">
        <h5>${item.title}</h5>
        <p>가격 : ${item.price}</p>
        <button class='buy'>구매</button>
      </div>`
        cardlist.insertAdjacentHTML('beforeend', secCardList)
      });
    }
    포이치(products);

    document.querySelector('#priceArr').addEventListener('click', () => {
      products.sort((a, b) => { return a.price - b.price });
      cardlist.innerHTML = ''
      포이치(products);
      clickcount = 0
      document.querySelector('#moreData').style.display = 'block'
    })

    document.querySelector('#namereturn').addEventListener('click', () => {
      products.sort((a, b) => {
        return a.title > b.title ? -1 : 1
      })
      cardlist.innerHTML = ''
      포이치(products);
      clickcount = 0
      document.querySelector('#moreData').style.display = 'block'
    })


    let newarr = products.filter((a) => { return a.price <= 60000 });
    document.querySelector('#priceUnder').addEventListener('click', () => {
      cardlist.innerHTML = ''
      포이치(newarr);
    })


    document.querySelector('#moreData').addEventListener('click', () => {
      if (clickcount == 0) {
        fetch('https://codingapple1.github.io/js/more1.json').then(response => {
          return response.json();
        }).then(data => {

          포이치(data)
        })
      }

      else if (clickcount == 1) {
        fetch('https://codingapple1.github.io/js/more2.json').then(response => {
          return response.json();
        }).then(data => {
          포이치(data)
        })
        document.querySelector('#moreData').style.display = 'none'
      }

      clickcount += 1
    })




  </script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>

</body>




</html>